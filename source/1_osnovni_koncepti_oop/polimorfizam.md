# Полиморфизам

Уз наслеђивање и енкапсулацију, полиморфизам (грч. *πολύ* - много, *μορφή* -
облик) представља један од три стуба ООП. Уопштено, полиморфизам дозвољава
креирања јединственог интерфејса ка различитим ентитетима. Конкретно, у
програмском језику C# полиморфизам се манифестује у различитим облицима. У овом
уводном поглављу како полиморфизам омогућује да се:

* преклапају методе у истој класи, где одабир методе врши компајлер на основу
потписа методе, односно на основу прослеђених аргумената
(**статички полиморфизам**), или 
* преклапају метода у изведеним класама, које су дефинисане у базној
класи, где се одабир методе врши динамички у време извршавања програма на
основу типа објекта (**динамички полиморфизам**).

## Статички полиморфизам

Преклапање метода у истој класи може се предтавити једноставним примером у
класи `PravougliTrougao`. Обим правоуглог троугла можеш израчунати ако су
познате све три странице ($O=a+b+c$), или, захваљујући Питагориној теореми, ако
су познате катете ($O=a+b+\sqrt{a^2+b^2}$). То значи да класа
`PravougliTrougao` може да има две методе `Obim` - једну која прихвата три
аргумента ($a$, $b$ и $c$) и другу која прихвата два аргумента ($a$ и $b$).

```cs
class Pravougli
{
    private double a;
    private double b;
    private double c;

    public double Obim(double a, double b, double c)
    {
        return a + b + c;
    }

    public double Obim(double a, double b)
    {
        return a + b + Math.Sqrt(a * a + b * b);
    }
}
```

У главном програму, одабир методе врши се на основу потписа методе, односно на
основу прослеђених аргумената.

```cs
Pravougli t = new Pravougli();
Console.WriteLine(t.Obim(3, 4));
Console.WriteLine(t.Obim(3, 4, 5));
```

У првом позиву `Obim(3, 4)`, компајлер бира метод `Obim(double a, double b)`,
јер се тај потпис методе најбоље подудара са два дата аргумента типа `double`.
У другом позиву `Obim(3, 4, 5)`, компајлер бира метод
`Obim(double a, double b, double c)`, јер се тај потпис методе најбоље подудара
са три дата аргумента типа `double`.

## Динамички полиморфизам

Преклапање метода у изведеним класама може се представити следећим једноставним
примером:

```cs
class Oblik
{
    public virtual void NacrtajOblik()
    {
        Console.WriteLine("Crtam oblik...");
    }
}

class Trougao : Oblik
{
    public override void NacrtajOblik()
    {
        Console.WriteLine("Crtam trougao...");
    }
}

class Krug : Oblik
{
    public override void NacrtajOblik()
    {
        Console.WriteLine("Crtam krug...");
    }
}
```

У примеру изнад метода `NacrtajOblik()` дефинисана је као виртуелна у базној
класи и преклопљена (`override`) у изведеним класама. У време извршавања
програма одабир методе врши на основу типа објекта. На пример:

```cs
Oblik[] oblici = { new Trougao(), new Krug() };
foreach (var o in oblici)
{
    o.NacrtajOblik();
}
```

У овом примеру омогућен је динамички позив метода за сваки објекат типа `Oblik`
- одговарајући метод извршава се у зависности од типа објекта у време
извршавања програма. Како је то могуће? Креиран је низ објеката типа `Oblik`,
и иницијализован инстанцама класа `Trougao` и `Krug`, које су изведене класе
базне класе `Oblik`. Када се у циклусу `foreach` позове метода
`NacrtajOblik()`, изабрани метод биће онај који је преклопљен у изведеној
класи. Тако, када се позове метод `NacrtajOblik()` за објекат типа `Trougao`,
извршава се преклопљени метод `NacrtajOblik()` из класе `Trougao`, а када се
позове за објекат типа `Krug`, извршава се преклопљени метод из класе `Krug`.

Као што је речено на почетку лекције, у програмском језику C# полиморфизам се
манифестује у различитим облицима. За сада је важно да запамтиш следеће:

```{infonote}
Статички полиморфизам омогућује **преклапање метода у истој класи**, где се
одабир методе врши у време компајлирања на основу потписа методе, односно на
основу прослеђених аргумената.

Динамички полиморфизам омогућује **преклапање метода у изведеним класама** које
су дефинисане у базној класи, где се одабир методе врши динамички у време
извршавања програма на основу типа објекта.
```
