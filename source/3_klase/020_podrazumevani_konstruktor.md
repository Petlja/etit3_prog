# Подразумевани конструктор

У претходним лекцијама научио си да су конструктори специјалне методе које се
користе приликом инстанцирања објекта. Имају исто име као и класа у којој су
дефинисани и могу бити различитих облика.

Практично, у статичкој меморији чува се референца на објекат, а сам објекат
чува се у динамичкој меморији, на хипу. Да би се објекат сачувао на хипу, за
њега се мора алоцирати одговарајући простор.

Први облик конструктора о којем ћеш учити је подразумевани конструктор. Њега
креира компајлер уколико класа нема дефинисане конструкторе. Његов задатак је
да приликом инстанцирања објекта алоцира одговарајући простор за објекат на
хипу и обезбеди иницијализацију поља на подразумеване вредности.

Нека класа `Zaposleni` има четири поља и нека је у класи `Program` креиран
један објекат `z` класе `Zaposleni`:

```cs
class Zaposleni
{
    public string ime;
    public bool prijavljen;
    public int staz;
    public double zarada;
}

class Program
{
    static void Main()
    {
        Zaposleni z = new Zaposleni();
    }
}
```

Извршавањем овог програма на хипу је креиран објекат `z` као инстанца класе
`Zaposleni`, чије поље `ime` има вредност `null`, поље `prijavljen` логичку
вредност `false`, поље `staz` целобројну вредност `0` и поље `zarada` реалну
вредност `0`. Ове вредности су аутоматске додељене пољима јер су то
подразумеване вредности типова коришћених за декларацију поља. Компајлер ће
због тога избацити следећа упозорења:

```text
CS0649: Field 'Zaposleni.ime' is never assigned to, and will always have its default value null
CS0649: Field 'Zaposleni.prijavljen' is never assigned to, and will always have its default value false
CS0649: Field 'Zaposleni.staz' is never assigned to, and will always have its default value 0
CS0649: Field 'Zaposleni.zarada' is never assigned to, and will always have its default value 0
```

У класи `Zaposleni` компајлер је заправо креирао подразумевани конструктор који
је позивом кључне речи `new`, тј. приликом инстанцирања објекта `z`, обезбедио
иницијализацију објекта и постављање његових поља на подразумеване вредности.
То значи да кôд у класи `Zaposleni` заправо изгледа овако:

```cs
class Zaposleni
{
    public string ime;
    public bool prijavljen;
    public int staz;
    public double zarada;

    public Zaposleni() { }    // Podrazumevani konstruktor
}
```

Подразумевани конструктор који се аутоматски генерише од стране компајлера
не садржи параметре, нити неку експлицитну логику, али је неопходан да би се
омогућило инстанцирање објекта.

Подразумевани конструктор можеш дефинисати експлицитно, чак иако је исти као и
подразумевани конструктор којег би генерисао компајлер. У овом случају то и
нема пуно смисла, али помоћу експлицитно дефинисаног подразумеваног
конструктора можеш да имплементираш додатну логику за иницијализацију објекта и
вредности поља. На пример:

```cs
class Zaposleni
{
    public string ime;
    public bool prijavljen;
    public int staz;
    public double zarada;

    public Zaposleni()
    {
        ime = "UNESI IME!";
        prijavljen = true;
        staz = 0;
        zarada = 49864.0;
    }
}
class Program
{
    static void Main()
    {
        Zaposleni z = new Zaposleni();
    }
}
```

Овако дефинисан конструктор поставио је иницијалне вредности свих поља, па
компајлер неће јављати никаква упозорења. Иако је поље стаж постављено на `0`
што представља подразумевану вредност за тип `int`, та вредност је експлицитно
дефинисана и не узрокује појаву упозорења. Осим избегавања упозорења од стране
компајлера, могу да постоје бројни разлози за имплементацију додатне логике за
иницијализацију поља. У овом случају:

* постављено је иницијално име запосленог `UNESI IME!` тј. спречено је да поље
`ime` иницијално буде `null`. Ако корисник програма случајно заборави да унесе
име запосленог, а у даљем развоју програма о томе није вођено рачуна, покушај
уписа податка `null` у базу података може да доведе до проблема;
* постављена је иницијална вредност `true` поља `prijavljen`, јер организације
не би смеле да имају непријављене запослене;
* постављена је иницијална вредност поља `staz` на `0`, јер јесте вероватно да
нови запослени немају никаквог радног искуства;
* постављена је иницијална вредност поља `zarada` на `49864.0` што је минимална
загарантована зарада, јер организације не би смеле да исплаћују зараде мање од
минималне.

Да ли ћеш користити могућност експлицитног дефинисања подразумеваног
коструктора за имплементацију додатне логике за иницијализацију објекта и
вредности поља или не, зависи од ситуације. Овим приступом можеш да осигураш да
су сви објекти класе правилно иницијализовани и да имају подразумеване
вредности које су смислене за конкретну ситуацију. То може бити добра пракса из
следећих разлога:

* **Специфична иницијализација**. Можеш поставити вредности поља на вредности
које нису подразумеване вредности типова, што може бити корисно ако твоја класа
захтева специфичне иницијалне вредности.
* **Лакше одржавање**. Иницијализациона логика је централизована у
конструктору, што олакшава одржавање кода. Ако треба да измените
иницијализацију, довољно је да то урадиш на једном месту.
* **Јасноћа кода**. Експлицитни конструктор може учинити кôд јаснијим јер
омогућава да видиш на једном месту како се објекти иницијализују.
* **Избегавање грешака**. Можеш имплементирати додатну логику за проверу и
валидацију у конструктору како би био сигуран да су објекти исправно
иницијализовани.

Међутим, постоје ситуације у којима није потребно да дефинишеш експлицитни
конструктор, посебно ако класа нема никакву специфичну иницијализацију и може
се ослонити на подразумеване вредности типова. У тим случајевима можеш оставити
компајлер да генерише подразумевани конструктор.

## Статички конструктор

Класа може да има дефинисан статички конструктор који се обично користи за
иницијализацију статичких чланова или извршавање кода који треба да се
изврши само једном приликом учитавања класе. У следећем примеру...

```cs
public class Brojanje
{
    public static int brojac;

    static Brojanje()
    {
        brojac = 0;
    }

    public int Povecaj()
    {
        return ++brojac;
    }
}
```

...у класи `Brojanje` дефинисано је статичко поље `brojac`, статички
конструктор којим је иницијализована вредност статичког поља и метода
`Povecaj()`. Приликом инстанцирања објекта класе `Brojanje`,
констуктором се иницијализује вредност поља бројач на `0`, а позивом методе
`Povecaj()`, та вредност се увећава за `1`:

```cs
Brojanje x = new Brojanje();
Console.WriteLine(x.Povecaj());    // 1
```
